<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <!-- Adobe Fonts - Myriad Pro Regular and Bold -->
    <link rel="stylesheet" href="https://use.typekit.net/ike4wxa.css">
    <style>
        body {
            font-family: 'Open Sans', Arial, sans-serif;
            background-color: #f4f7fa;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        h1 {
            text-align: center;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        h3 {
            text-align: center;
            color: gray;
            margin-top: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .form-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        input[type="text"], input[type="tel"], select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }

        select {
            cursor: pointer;
        }

        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background-color: #0056b3;
        }

        .preview-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #canvas {
            border: 1px solid #ddd;
            border-radius: 4px;
            max-width: 100%;
            height: auto;
        }

        .canvas-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Header Generator</h1>
        <h3>Marketing Header Generator</h3>

        <div class="form-section">
            <form id="headerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="logo">Logo:</label>
                        <select id="logo" required>
                            <option value="">Select a logo...</option>
                            <option value="NYBH">NYBH</option>
                            <option value="NYI">NYI</option>
                            <option value="NYCBS">NYCBS</option>
                            <option value="Blank">Blank</option>
                            <option value="NYH_Reg">NYH</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="address">Address:</label>
                        <input type="text" id="address" placeholder="123 Main Street, City, State 12345" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="tel">Telephone:</label>
                        <input type="tel" id="tel" placeholder="(555) 123-4567" required>
                    </div>
                    <div class="form-group">
                        <label for="fax">Fax:</label>
                        <input type="tel" id="fax" placeholder="(555) 123-4568" required>
                    </div>
                </div>

                <button type="submit">Generate Header Preview</button>
            </form>
        </div>

        <div class="preview-section">
            <h3>Header Preview</h3>
            <div class="canvas-container">
                <canvas id="canvas" width="2550" height="374" style="width: 800px; height: 117px;"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Header background images with logos
        const headerBackgrounds = {
            'NYBH': 'Logos/NYBH.png',
            'NYI': 'Logos/NYI.png',
            'NYCBS': 'Logos/NYCBS.png',
            'Blank': 'Logos/Blank.png',
            'NYH': 'Logos/NYH_Reg.png'
        };

        function generateHeader(logoId, address, tel, fax) {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            
            // Constants for positioning (at 300 DPI)
            const rightMargin = 72; // 0.24 inches = 72 pixels at 300 DPI
            const fontSize = 39; // 11pt at 300 DPI = 33
            
            // Load the background image with logo
            const backgroundImg = new Image();
            backgroundImg.onload = function() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw the background image with logo
                ctx.drawImage(backgroundImg, 0, 0, canvas.width, canvas.height);
                
                // Font family with Myriad Pro and fallbacks
                const regularFont = `${fontSize}px "Myriad Pro", "myriad-pro", Arial, sans-serif`;
                const boldFont = `bold ${fontSize}px "Myriad Pro", "myriad-pro", Arial, sans-serif`;
                
                // Calculate textbox positioning (right-aligned)
                const textboxX = canvas.width - rightMargin;
                const lineHeight = fontSize * 1.18; // Spacing like 13pt font (13/11 ratio)
                const textboxCenterY = canvas.height / 2;
                const line1Y = textboxCenterY - lineHeight / 2;
                const line2Y = textboxCenterY + lineHeight / 2;
                
                // Set font for regular text
                ctx.font = regularFont;
                ctx.textAlign = 'right';
                ctx.fillStyle = '#000000';
                ctx.textBaseline = 'middle';
                
                // Draw Line 1: Address (regular font)
                ctx.fillText(address, textboxX, line1Y);
                
                // Draw Line 2: Tel and Fax with proper bold/regular mixing
                ctx.textAlign = 'right';
                
                // Build the line with measurements for proper formatting
                const telLabel = "Tel: ";
                const separator = " | ";
                const faxLabel = "Fax: ";
                
                // Measure text widths
                ctx.font = boldFont;
                const telLabelWidth = ctx.measureText(telLabel).width;
                const separatorWidth = ctx.measureText(separator).width;
                const faxLabelWidth = ctx.measureText(faxLabel).width;
                
                ctx.font = regularFont;
                const telWidth = ctx.measureText(tel).width;
                const faxWidth = ctx.measureText(fax).width;
                
                // Calculate positions (working right to left)
                let currentX = textboxX;
                
                // Draw fax number (regular)
                ctx.font = regularFont;
                ctx.fillText(fax, currentX, line2Y);
                currentX -= faxWidth;
                
                // Draw "Fax: " (bold)
                ctx.font = boldFont;
                ctx.fillText(faxLabel, currentX, line2Y);
                currentX -= faxLabelWidth;
                
                // Draw separator " | " (bold)
                ctx.fillText(separator, currentX, line2Y);
                currentX -= separatorWidth;
                
                // Draw tel number (regular)
                ctx.font = regularFont;
                ctx.fillText(tel, currentX, line2Y);
                currentX -= telWidth;
                
                // Draw "Tel: " (bold)
                ctx.font = boldFont;
                ctx.fillText(telLabel, currentX, line2Y);
            };
            
            backgroundImg.onerror = function() {
                console.error('Error loading background image:', headerBackgrounds[logoId]);
                alert('Error loading logo background. Please check that the image file exists in the Logos/ folder.');
            };
            
            // Load the background image
            backgroundImg.src = headerBackgrounds[logoId];
        }

        // Form submission
        document.getElementById('headerForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const logoId = document.getElementById('logo').value;
            const address = document.getElementById('address').value;
            const tel = document.getElementById('tel').value;
            const fax = document.getElementById('fax').value;
            
            if (!logoId || !address || !tel || !fax) {
                alert('Please fill in all fields.');
                return;
            }
            
            generateHeader(logoId, address, tel, fax);
        });

        // Phone number formatting
        function formatPhone(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length <= 3) {
                input.value = value;
            } else if (value.length <= 6) {
                input.value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
            } else {
                input.value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
            }
        }

        // Add phone formatting to tel and fax inputs
        document.getElementById('tel').addEventListener('input', function() {
            formatPhone(this);
        });

        document.getElementById('fax').addEventListener('input', function() {
            formatPhone(this);
        });
    </script>
</body>
</html>
